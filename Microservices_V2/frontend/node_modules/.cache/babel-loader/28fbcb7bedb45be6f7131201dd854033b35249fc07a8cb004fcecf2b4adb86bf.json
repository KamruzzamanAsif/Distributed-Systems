{"ast":null,"code":"import _regeneratorRuntime from\"/home/vamps/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/vamps/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/vamps/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddPost=function AddPost(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var handleTextChange=function handleTextChange(event){setText(event.target.value);};var handleImageChange=function handleImageChange(event){var file=event.target.files[0];setImage(file);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var formData,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(text){_context.next=4;break;}console.log('Please enter post text.');return _context.abrupt(\"return\");case 4:// If image is not selected, set it to null in the formData\nformData=new FormData();formData.append('user_name',localStorage.getItem('username'));formData.append('user_email',localStorage.getItem('email'));// Replace with the user's email\nformData.append('content',text);formData.append('image',image||null);console.log(formData);_context.next=12;return axios.post('http://localhost/post/posts',formData,{headers:{'Content-Type':'multipart/form-data'}});case 12:response=_context.sent;if(response.status===200){data=response.data;// If the post is successfully created on the backend, you can handle the data\n// or perform any other actions here\nconsole.log('New post:',data.post);// Call the onAddPost function to update the post list in the parent component\n// Clear the input fields after successful submission\nsetText('');setImage(null);}else{// Handle any error responses from the backend here\nconsole.log('Error:',response.statusText);}_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);// Handle any errors that occurred during the Axios request\nconsole.error('Error:',_context.t0);case 19:case\"end\":return _context.stop();}},_callee,null,[[0,16]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-lg mx-auto bg-white rounded-lg shadow p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold mb-2\",children:\"Create a New Post\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full p-2 border rounded-md resize-none mb-2\",placeholder:\"Enter your post text...\",value:text,onChange:handleTextChange}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageChange,className:\"mb-2\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",onClick:handleSubmit,children:\"Post\"})]});};export default AddPost;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","AddPost","_useState","_useState2","_slicedToArray","text","setText","_useState3","_useState4","image","setImage","handleTextChange","event","target","value","handleImageChange","file","files","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","response","data","wrap","_callee$","_context","prev","next","console","log","abrupt","FormData","append","localStorage","getItem","post","headers","sent","status","statusText","t0","error","stop","apply","arguments","className","children","placeholder","onChange","type","accept","onClick"],"sources":["/home/vamps/Desktop/frontend/src/components/addPost.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\n\nconst AddPost = () => {\n  const [text, setText] = useState('');\n  const [image, setImage] = useState(null);\n\n  const handleTextChange = (event) => {\n    setText(event.target.value);\n  };\n\n  const handleImageChange = (event) => {\n    const file = event.target.files[0];\n    setImage(file);\n  };\n\n  const handleSubmit = async () => {\n    try {\n      if (!text) {\n        console.log('Please enter post text.');\n        return;\n      }\n\n      // If image is not selected, set it to null in the formData\n      const formData = new FormData();\n      formData.append('user_name', localStorage.getItem('username'));\n      formData.append('user_email', localStorage.getItem('email')); // Replace with the user's email\n      formData.append('content', text);\n      formData.append('image', image || null);\n      \n      console.log(formData);\n      \n      const response = await axios.post('http://localhost/post/posts', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      if (response.status === 200) {\n        const data = response.data;\n        // If the post is successfully created on the backend, you can handle the data\n        // or perform any other actions here\n        console.log('New post:', data.post);\n        // Call the onAddPost function to update the post list in the parent component\n        \n        // Clear the input fields after successful submission\n        setText('');\n        setImage(null);\n      } else {\n        // Handle any error responses from the backend here\n        console.log('Error:', response.statusText);\n      }\n    } catch (error) {\n      // Handle any errors that occurred during the Axios request\n      console.error('Error:', error);\n    }\n  };\n\n  return (\n    <div className=\"max-w-lg mx-auto bg-white rounded-lg shadow p-4 mb-4\">\n      <h2 className=\"text-lg font-bold mb-2\">Create a New Post</h2>\n      <textarea\n        className=\"w-full p-2 border rounded-md resize-none mb-2\"\n        placeholder=\"Enter your post text...\"\n        value={text}\n        onChange={handleTextChange}\n      />\n      <input\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleImageChange}\n        className=\"mb-2\"\n      />\n      <button\n        className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n        onClick={handleSubmit}\n      >\n        Post\n      </button>\n    </div>\n  );\n};\n\nexport default AddPost;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}